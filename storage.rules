rules_version = '2';

// Firebase Storage ë³´ì•ˆ ê·œì¹™
service firebase.storage {
  match /b/{bucket}/o {
    
    // ğŸ” ì‚¬ìš©ì í”„ë¡œí•„ ì´ë¯¸ì§€ (íšŒì›ê°€ì… ì‹œ ìƒµ ì‚¬ì§„ ë“±)
    // - ëª¨ë“  ì‚¬ìš©ì ì½ê¸°/ì“°ê¸° ê°€ëŠ¥
    match /users/{userId}/{allPaths=**} {
      allow read, write: if true;
    }
    
    // ğŸ›ï¸ ìƒí’ˆ ì´ë¯¸ì§€
    // - ëª¨ë“  ì‚¬ìš©ì ì½ê¸° ê°€ëŠ¥ (ì‡¼í•‘ëª° í‘œì‹œìš©)
    // - ëª¨ë“  ì‚¬ìš©ì ì“°ê¸° ê°€ëŠ¥ (ì—…ë¡œë“œ ê°€ëŠ¥)
    match /products/{allPaths=**} {
      allow read, write: if true;
    }
    
    // ğŸ“„ ê³µê°œ íŒŒì¼ë“¤ (ë¡œê³ , ë°°ë„ˆ ë“±)
    // - ëª¨ë“  ì‚¬ìš©ì ì½ê¸°/ì“°ê¸° ê°€ëŠ¥
    match /public/{allPaths=**} {
      allow read, write: if true;
    }
    
    // ğŸ“ ë¦¬ë·° ì´ë¯¸ì§€
    // - ëª¨ë“  ì‚¬ìš©ì ì½ê¸°/ì“°ê¸° ê°€ëŠ¥
    match /reviews/{allPaths=**} {
      allow read, write: if true;
    }
    
    // ğŸ”§ í…ŒìŠ¤íŠ¸ìš© ê²½ë¡œ (ë¬¸ì œ í•´ê²°ì„ ìœ„í•œ ì„ì‹œ)
    match /test/{allPaths=**} {
      allow read, write: if true;
    }
    
    // ğŸ“¢ ê³µì§€ì‚¬í•­ ì²¨ë¶€íŒŒì¼ - ëª¨ë“  ì‚¬ìš©ì ì½ê¸° ê°€ëŠ¥, ê´€ë¦¬ìë§Œ ì“°ê¸° ê°€ëŠ¥
    match /notices/{allPaths=**} {
      allow read: if true;
      allow write: if request.auth != null;
    }
    
    // ğŸ¤” FAQ ì²¨ë¶€íŒŒì¼ - ëª¨ë“  ì‚¬ìš©ì ì½ê¸° ê°€ëŠ¥, ê´€ë¦¬ìë§Œ ì“°ê¸° ê°€ëŠ¥
    match /faq/{allPaths=**} {
      allow read: if true;
      allow write: if request.auth != null;
    }
    
    // ğŸ“‹ ìƒí’ˆ ì²¨ë¶€íŒŒì¼ (ë§¤ë‰´ì–¼, ë³´ì¦ì„œ) - ëª¨ë“  ì‚¬ìš©ì ì½ê¸° ê°€ëŠ¥, ê´€ë¦¬ìë§Œ ì“°ê¸° ê°€ëŠ¥
    match /productAttachments/{allPaths=**} {
      allow read: if true;
      allow write: if request.auth != null;
    }
    
    // ğŸ“¦ ì£¼ë¬¸ ê´€ë ¨ íŒŒì¼ - ì¸ì¦ëœ ì‚¬ìš©ìë§Œ ì ‘ê·¼
    match /orders/{allPaths=**} {
      allow read, write: if request.auth != null;
    }
    
    // ğŸ’¬ ê³ ê° ë¬¸ì˜ ì²¨ë¶€íŒŒì¼ - ì¸ì¦ëœ ì‚¬ìš©ìë§Œ ì ‘ê·¼
    match /inquiries/{allPaths=**} {
      allow read, write: if request.auth != null;
    }
    
    // ğŸ’° í™˜ë¶ˆ ê´€ë ¨ ì¦ë¹™ìë£Œ - ì¸ì¦ëœ ì‚¬ìš©ìë§Œ ì ‘ê·¼
    match /refunds/{allPaths=**} {
      allow read, write: if request.auth != null;
    }
    
    // ğŸ›¡ï¸ ê´€ë¦¬ì ì „ìš© íŒŒì¼ - ê´€ë¦¬ìë§Œ ì ‘ê·¼
    match /admin/{allPaths=**} {
      allow read, write: if request.auth != null;
    }
    
    // ğŸ’¾ ë°±ì—… íŒŒì¼ë“¤ - ê´€ë¦¬ìë§Œ ì ‘ê·¼
    match /backups/{allPaths=**} {
      allow read, write: if request.auth != null;
    }
    
    // âš™ï¸ ì„¤ì • ê´€ë ¨ íŒŒì¼ - ê´€ë¦¬ìë§Œ ì ‘ê·¼
    match /settings/{allPaths=**} {
      allow read, write: if request.auth != null;
    }
    
    // ğŸ“Š ë¶„ì„ ë°ì´í„° íŒŒì¼ - ê´€ë¦¬ìë§Œ ì ‘ê·¼
    match /analytics/{allPaths=**} {
      allow read, write: if request.auth != null;
    }
    
    // ğŸ“ ì‹œìŠ¤í…œ ë¡œê·¸ íŒŒì¼ - ê´€ë¦¬ìë§Œ ì ‘ê·¼
    match /logs/{allPaths=**} {
      allow read, write: if request.auth != null;
    }
    
    // â³ ì„ì‹œ íŒŒì¼ (ì—…ë¡œë“œ ì¤‘, ìºì‹œ) - ëª¨ë“  ì‚¬ìš©ì ì½ê¸°/ì“°ê¸° ê°€ëŠ¥
    match /temp/{allPaths=**} {
      allow read, write: if true;
    }
    
    // ============== ê°€ê²© ë³´í˜¸ ë° ë³´ì•ˆ ê´€ë ¨ íŒŒì¼ ==============
    
    // ğŸ’° ê°€ê²© ê´€ë ¨ ì´ë¯¸ì§€/íŒŒì¼ (ë¡œê·¸ì¸ ì‚¬ìš©ìë§Œ)
    match /pricing/{allPaths=**} {
      allow read: if request.auth != null;
      allow write: if request.auth != null;
    }
    
    // ğŸ”’ ê°€ê²© ì›Œí„°ë§ˆí¬ ì´ë¯¸ì§€ (ë¡œê·¸ì¸ ìœ ë„ìš©)
    match /priceProtection/{allPaths=**} {
      allow read: if true;
      allow write: if request.auth != null;
    }
    
    // ğŸ“Š ì‚¬ìš©ì í™œë™ ë¡œê·¸ íŒŒì¼ (ê´€ë¦¬ìë§Œ)
    match /activityLogs/{allPaths=**} {
      allow read: if request.auth != null;
      allow write: if true; // ë¡œê·¸ ìë™ ìƒì„±ìš©
    }
    
    // ğŸ” ê²€ìƒ‰ ê´€ë ¨ íŒŒì¼ (í‚¤ì›Œë“œ ë§¤í•‘, ê²°ê³¼ ìºì‹œ)
    match /searchData/{allPaths=**} {
      allow read: if request.auth != null;
      allow write: if true; // ê²€ìƒ‰ ê²°ê³¼ ìºì‹±ìš©
    }
    
    // ğŸ‘¤ ê²ŒìŠ¤íŠ¸ ì„¸ì…˜ íŒŒì¼ (ì„ì‹œ ë°ì´í„°)
    match /guestData/{allPaths=**} {
      allow read, write: if true;
    }
    
    // ğŸ“ˆ ë³€í™˜ ì¶”ì  ì´ë¯¸ì§€ (ë¶„ì„ìš©)
    match /conversionTracking/{allPaths=**} {
      allow read: if request.auth != null;
      allow write: if true;
    }
    
    // ğŸ§ª A/B í…ŒìŠ¤íŠ¸ ë¦¬ì†ŒìŠ¤
    match /abTestAssets/{allPaths=**} {
      allow read: if true;
      allow write: if request.auth != null;
    }
    
    // ğŸ—ºï¸ íˆíŠ¸ë§µ ì´ë¯¸ì§€ (í´ë¦­/ì¡°íšŒ ë¶„ì„)
    match /heatmaps/{allPaths=**} {
      allow read: if request.auth != null;
      allow write: if true;
    }
    
    // ğŸš¨ ë³´ì•ˆ ì´ë²¤íŠ¸ ìŠ¤í¬ë¦°ìƒ· (ì˜ì‹¬ìŠ¤ëŸ¬ìš´ í™œë™)
    match /securityEvents/{allPaths=**} {
      allow read: if request.auth != null;
      allow write: if true;
    }
    
    // ğŸ“± ëª¨ë°”ì¼ ì „ìš© ê°€ê²© í‘œì‹œ ì´ë¯¸ì§€
    match /mobilePricing/{allPaths=**} {
      allow read: if request.auth != null;
      allow write: if request.auth != null;
    }
    
    // ğŸ¯ ì‚¬ìš©ì ì„¸ê·¸ë¨¼íŠ¸ ê´€ë ¨ ë¦¬ì†ŒìŠ¤
    match /userSegments/{allPaths=**} {
      allow read: if request.auth != null;
      allow write: if request.auth != null;
    }
    
    // ğŸ“Š ì‹¤ì‹œê°„ ëŒ€ì‹œë³´ë“œ ì°¨íŠ¸ ì´ë¯¸ì§€
    match /realtimeCharts/{allPaths=**} {
      allow read: if request.auth != null;
      allow write: if true;
    }
    
    // ğŸ” ê²€ìƒ‰ ìë™ì™„ì„± ë°ì´í„° íŒŒì¼
    match /autocomplete/{allPaths=**} {
      allow read: if true;
      allow write: if request.auth != null;
    }
    
    // ğŸ·ï¸ ê°€ê²© íƒœê·¸ í…œí”Œë¦¿ ì´ë¯¸ì§€
    match /priceTags/{allPaths=**} {
      allow read: if request.auth != null;
      allow write: if request.auth != null;
    }
    
  }
}